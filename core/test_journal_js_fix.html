<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BFI Signals Journal - JavaScript Test</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; background-color: #0a0a0a; color: white; }
        .test-container { max-width: 800px; margin: 0 auto; }
        .test-button { 
            padding: 10px 20px; 
            margin: 10px; 
            background: #d4af37; 
            color: #000; 
            border: none; 
            border-radius: 5px; 
            cursor: pointer; 
        }
        .test-result { 
            margin: 10px 0; 
            padding: 10px; 
            border-radius: 5px; 
            background: #333; 
        }
        .test-success { background: #004d00; }
        .test-error { background: #4d0000; }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>üß™ BFI Signals Journal - JavaScript Function Test</h1>
        <p>This page tests that all required JavaScript functions are defined and accessible.</p>
        
        <div class="test-section">
            <h2>Function Tests</h2>
            <button class="test-button" onclick="testFunction('openTradeModal')">Test openTradeModal()</button>
            <button class="test-button" onclick="testFunction('viewTradeDetails', 1)">Test viewTradeDetails()</button>
            <button class="test-button" onclick="testFunction('editTrade', 1)">Test editTrade()</button>
            <button class="test-button" onclick="testFunction('deleteTrade', 1)">Test deleteTrade()</button>
            <button class="test-button" onclick="testFunction('toggleFilters')">Test toggleFilters()</button>
            <button class="test-button" onclick="testFunction('exportTrades')">Test exportTrades()</button>
            <button class="test-button" onclick="testFunction('viewChart', 'test.jpg')">Test viewChart()</button>
            
            <div id="testResults"></div>
        </div>

        <div class="test-section" style="margin-top: 40px;">
            <h2>HTML Button Tests</h2>
            <p>These buttons should work without console errors:</p>
            <button class="test-button" onclick="openTradeModal()">‚ûï Add New Trade</button>
            <button class="test-button" onclick="viewTradeDetails(123)">üëÅÔ∏è View Trade 123</button>
            <button class="test-button" onclick="editTrade(123)">‚úèÔ∏è Edit Trade 123</button>
            <button class="test-button" onclick="deleteTrade(123)">üóëÔ∏è Delete Trade 123</button>
            <button class="test-button" onclick="toggleFilters()">üîç Toggle Filters</button>
            <button class="test-button" onclick="exportTrades()">üì• Export Trades</button>
            <button class="test-button" onclick="viewChart('/test/chart.jpg')">üñºÔ∏è View Chart</button>
        </div>
    </div>

    <script>
        // Mock some required CSS variables and basic functionality
        document.documentElement.style.setProperty('--card-bg', 'rgba(15, 15, 15, 0.95)');
        document.documentElement.style.setProperty('--golden-accent', '#d4af37');
        document.documentElement.style.setProperty('--golden-primary', '#d4af37');
        document.documentElement.style.setProperty('--text-primary', '#ffffff');
        document.documentElement.style.setProperty('--text-secondary', '#cccccc');
        document.documentElement.style.setProperty('--primary-bg', '#0a0a0a');
        document.documentElement.style.setProperty('--success-color', '#00ff88');
        document.documentElement.style.setProperty('--danger-color', '#ff4757');
        document.documentElement.style.setProperty('--warning-color', '#ffa502');

        // Test function to check if functions are defined
        function testFunction(funcName, ...args) {
            const resultsDiv = document.getElementById('testResults');
            const result = document.createElement('div');
            result.className = 'test-result';
            
            try {
                if (typeof window[funcName] === 'function') {
                    result.innerHTML = `‚úÖ <strong>${funcName}</strong> is defined and accessible`;
                    result.classList.add('test-success');
                    
                    // Try to call the function (this might fail due to missing DOM elements or API endpoints)
                    try {
                        window[funcName](...args);
                        result.innerHTML += ` - Function called successfully (may show errors due to missing elements/APIs)`;
                    } catch (callError) {
                        result.innerHTML += ` - Function exists but call failed: ${callError.message}`;
                    }
                } else {
                    result.innerHTML = `‚ùå <strong>${funcName}</strong> is NOT defined or not accessible`;
                    result.classList.add('test-error');
                }
            } catch (error) {
                result.innerHTML = `‚ùå Error testing <strong>${funcName}</strong>: ${error.message}`;
                result.classList.add('test-error');
            }
            
            resultsDiv.appendChild(result);
        }

        // Run automatic tests on load
        window.addEventListener('DOMContentLoaded', function() {
            console.log('üß™ Starting JavaScript function tests...');
            
            const functions = [
                'openTradeModal',
                'viewTradeDetails', 
                'editTrade',
                'deleteTrade',
                'toggleFilters',
                'exportTrades',
                'viewChart',
                'closeModal',
                'submitTradeModal',
                'applyFilters',
                'clearFilters',
                'loadPage',
                'performSearch'
            ];
            
            let passed = 0;
            let failed = 0;
            
            functions.forEach(funcName => {
                if (typeof window[funcName] === 'function') {
                    console.log(`‚úÖ ${funcName} is properly defined`);
                    passed++;
                } else {
                    console.error(`‚ùå ${funcName} is NOT defined`);
                    failed++;
                }
            });
            
            console.log(`\nüìä Test Results: ${passed} passed, ${failed} failed`);
            
            if (failed === 0) {
                console.log('üéâ All JavaScript functions are properly defined!');
            } else {
                console.log('‚ö†Ô∏è Some functions are missing - check the console above');
            }
        });
        
        // Mock functions for basic functionality
        window.showNotification = function(message, type = 'info') {
            console.log(`üì¢ ${type.toUpperCase()}: ${message}`);
            alert(`${type.toUpperCase()}: ${message}`);
        };

        // Basic CSS variable setup
        const style = document.createElement('style');
        style.textContent = `
            :root {
                --card-bg: rgba(15, 15, 15, 0.95);
                --golden-accent: #d4af37;
                --golden-primary: #d4af37;
                --text-primary: #ffffff;
                --text-secondary: #cccccc;
                --primary-bg: #0a0a0a;
                --success-color: #00ff88;
                --danger-color: #ff4757;
                --warning-color: #ffa502;
            }
        `;
        document.head.appendChild(style);
    </script>

    <!-- Include the actual JavaScript from journal_modern.html -->
    <script>
        // Simplified version of the key functions from journal_modern.html
        
        // Main functions that should be globally accessible
        window.openTradeModal = function() {
            console.log('üîß openTradeModal called');
            showNotification('openTradeModal function is working!', 'success');
        };

        window.viewTradeDetails = function(entryId) {
            console.log('üîß viewTradeDetails called for ID:', entryId);
            showNotification(`viewTradeDetails function is working for trade ${entryId}!`, 'success');
        };

        window.editTrade = function(entryId) {
            console.log('üîß editTrade called for ID:', entryId);
            showNotification(`editTrade function is working for trade ${entryId}!`, 'success');
        };

        window.deleteTrade = function(entryId) {
            console.log('üîß deleteTrade called for ID:', entryId);
            if (confirm(`Are you sure you want to delete trade ${entryId}?`)) {
                showNotification(`deleteTrade function is working for trade ${entryId}!`, 'success');
            }
        };

        window.toggleFilters = function() {
            console.log('üîß toggleFilters called');
            showNotification('toggleFilters function is working!', 'success');
        };

        window.exportTrades = function() {
            console.log('üîß exportTrades called');
            showNotification('exportTrades function is working!', 'success');
        };

        window.viewChart = function(imagePath) {
            console.log('üîß viewChart called for:', imagePath);
            showNotification(`viewChart function is working for ${imagePath}!`, 'success');
        };

        window.closeModal = function() {
            console.log('üîß closeModal called');
            showNotification('closeModal function is working!', 'success');
        };

        window.submitTradeModal = function(isEdit = false) {
            console.log('üîß submitTradeModal called, isEdit:', isEdit);
            showNotification(`submitTradeModal function is working! Edit mode: ${isEdit}`, 'success');
        };

        window.applyFilters = function() {
            console.log('üîß applyFilters called');
            showNotification('applyFilters function is working!', 'success');
        };

        window.clearFilters = function() {
            console.log('üîß clearFilters called');
            showNotification('clearFilters function is working!', 'success');
        };

        window.loadPage = function(page) {
            console.log('üîß loadPage called for page:', page);
            showNotification(`loadPage function is working for page ${page}!`, 'success');
        };

        window.performSearch = function() {
            console.log('üîß performSearch called');
            showNotification('performSearch function is working!', 'success');
        };
    </script>
</body>
</html>